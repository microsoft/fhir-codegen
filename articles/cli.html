<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Command Line Interface </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Command Line Interface ">
    <meta name="generator" content="docfx 2.59.4.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="command-line-interface">Command Line Interface</h1>

<p>The command-line-interface (CLI) project is intended as a utility suitable for both manual and automated (e.g., CI Pipeline) use.</p>
<p>The CLI is focused on language-export.  It includes options to specify inputs (e.g., which FHIR packages to download/parse, if additional filters should be used, etc.) and outputs (e.g., export language, destination directory, etc.).</p>
<h2 id="options">Options</h2>
<p>The CLI self-reports all options with descriptions:</p>
<pre><code class="lang-dos">Usage:
  fhir-codegen-cli [options]

Options:
  -o, --output-path &lt;output-path&gt;                File or directory to write output.

  --package-directory &lt;package-directory&gt;        The path to a local directory for FHIR packages,
                                                 if different than the default 
                                                 FHIR cache (~/.fhir); e.g., (.../fhirPackages)).

  -l, --language &lt;language&gt;                      Name of the language to export (default: 
                                                 Info|TypeScript|CSharpBasic).
  --language-help                                Display languages and their options. 
                                                 [default: False]
  --language-options, --opts &lt;language-options&gt;  Language specific options, see documentation for
                                                 more details. Example: 
                                                 Lang1|opt=a|opt2=b|Lang2|opt=tt|opt3=oo.
  --language-input-dir &lt;language-input-dir&gt;      The full path to a local directory to pass 
                                                 additional content to languages.

  --offline-mode                                 Offline mode (will not download packages).
                                                 [default: False]
  -k, --export-keys &lt;export-keys&gt;                '|' separated list of items to export (not present
                                                 to export everything).
  --official-expansions-only                     Set to restrict value-sets to only official
                                                 expansions. [default: False]
  --experimental, --include-experimental         If the output should include structures marked
                                                 experimental. [default: False]
  --export-types, --types &lt;export-types&gt;         Types of FHIR structures to export
                                                 (primitive|complex|resource|interaction|enum),
                                                 default is all.
  --extension-support &lt;extension-support&gt;        The level of extensions to include (none|
                                                 official|officialNonPrimitive|nonPrimitive|all),
                                                 default is nonPrimitive.
  --fhir-server-url, --server &lt;fhir-server-url&gt;  FHIR Server URL to pull a CapabilityStatement 
                                                 or Conformance from. The server
                                                 must provide application/fhir+json support.

  -p, --packages &lt;packages&gt;                      '|' separated list of packages, with or without
                                                 version numbers, e.g.,
                                                 hl7.fhir.r4.core#4.0.1|hl7.fhir.us.core#latest.
  --load-DSTU2, --load-r2 &lt;load-DSTU2&gt;           If FHIR DSTU2 should be loaded, which version
                                                 (e.g., 1.0.2 or latest)
  --load-r3, --load-STU3 &lt;load-STU3&gt;             If FHIR STU3 should be loaded, which version
                                                 (e.g., 3.0.2 or latest)
  --load-r4 &lt;load-r4&gt;                            If FHIR R4 should be loaded, which version
                                                 (e.g., 4.0.1 or latest)
  --load-r4b &lt;load-r4b&gt;                          If FHIR R4B should be loaded, which version
                                                 (e.g., 4.3.0 or latest)
  --load-r5 &lt;load-r5&gt;                            If FHIR R5 should be loaded, which version
                                                 (e.g., 5.0.0-ballot or latest)
  --ci-branch &lt;ci-branch&gt;                        If loading from the CI server, the name of the 
                                                 branch to use.

  -v, --verbose                                  Show verbose output. [default: False]
  --version                                      Show version information
  -?, -h, --help                                 Show help and usage information
</code></pre>
<h2 id="package-source">Package Source</h2>
<p>By default, the CLI will use the user's FHIR cache directory (<code>~/.fhir</code>).  This directory is common to many tools in the FHIR ecosystem, such as the publication tooling (e.g., IG Publisher) and package-based tools from other companies (e.g., Firely).</p>
<p>If a different directory is desired (e.g., CI Builds in a docker image, 'clean' builds from a specific location, etc.), the <code>--package-directory</code> option can be used.</p>
<h2 id="specifying-packages">Specifying Packages</h2>
<p>Initially, the CLI only supported loading FHIR Core specifications (e.g., FHIR R4).  In order to maintain backwards compatibility, explicit options to load core specifications are still supported (e.g., <code>--load-r4 latest</code>), though users should consider changing to the package directive format (e.g., <code>--packages hl7.fhir.r4.core#latest</code>).</p>
<h2 id="languages">Languages</h2>
<p>fhir-codegen supports several export languages, each with their own configuration (options), additional files, and artifact support.  Since the language support is common to all projects in the repository, more information can be found on the <a href="languages.html">Languages Page</a></p>
<h2 id="filtering">Filtering</h2>
<p>Several options relate to filtering the artifacts included in a package, e.g., <code>--export-keys</code> is used to provide an explicit list of artifacts that should be allowed; <code>--server</code> is used to filter packages based on the capabilities of an existing FHIR server; etc..</p>
<p>These filters are applied after packages are loaded.  For example, a user may want to generate <em>only</em> definitions for FHIR R4 Patient, Encounter, Observation, and Bundle resources.  A user can specify to load the FHIR R4 specification and use the option <code>--export-keys Patient|Encounter|Observation|Bundle</code> to filter the specification.  Note that the filtering is &quot;smart&quot; in that all definitions required by those resources (e.g., data types, etc.) will still be included.</p>
<p>Note that some languages will provide 'object' stubs for elements that cannot be defined, while others may exclude them entirely.</p>
<h2 id="examples">Examples</h2>
<ul>
<li><p>Download and parse FHIR R4 (latest published version) into the user FHIR cache, then build a TypeScript file in the current directory</p>
<ul>
<li><code>fhir-codegen-cli -p hl7.fhir.r4#latest --language TypeScript --output-path ./R4.ts</code></li>
</ul>
</li>
<li><p>Download and parse FHIR R4 (latest published version) into the user FHIR cache, then build a TypeScript file in the current directory, restricted to just the Resources: Patient, Encounter, and Observation</p>
<ul>
<li><code>fhir-codegen-cli --load-r4 latest --language TypeScript --output-path ./R4.ts --export-keys Patient|Encounter|Observation</code></li>
</ul>
</li>
<li><p>Download and parse the latest published version of each FHIR release into the user FHIR cache, then build a C# file for each in ./cs</p>
<ul>
<li><code>fhir-codegen-cli --load-r2 latest --load-r3 latest --load-r4 latest --load-r5 latest --language CSharpBasic --output-path ./cs</code></li>
</ul>
</li>
<li><p>Download and parse FHIR R4 (latest published version) into the user FHIR cache, then build a C# file in the current directory using the namespace: MyOrg.MyProject.Fhir</p>
<ul>
<li><code>fhir-codegen-cli -p hl7.fhir.r4#latest --language CSharpBasic --output-path ./cs/R4.cs --language-options CSharpBasic|namespace=MyOrg.MyProject.Fhir</code></li>
</ul>
</li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/microsoft/fhir-codegen/blob/main/docfx/articles/cli.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
